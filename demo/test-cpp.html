<pre>
<span style='color:#696969; '>/* ====================================================================</span>
<span style='color:#696969; '> *  Copyright 2004 Edward Rudd and Paul Querna</span>
<span style='color:#696969; '> *</span>
<span style='color:#696969; '> *  Licensed under the Apache License, Version 2.0 (the "License");</span>
<span style='color:#696969; '> *  you may not use this file except in compliance with the License.</span>
<span style='color:#696969; '> *  You may obtain a copy of the License at</span>
<span style='color:#696969; '> *</span>
<span style='color:#696969; '> *      </span><span style='color:#5555dd; '>http://www.apache.org/licenses/LICENSE-2.0</span><span style='color:#696969; '></span>
<span style='color:#696969; '> *</span>
<span style='color:#696969; '> *  Unless required by applicable law or agreed to in writing, software</span>
<span style='color:#696969; '> *  distributed under the License is distributed on an "AS IS" BASIS,</span>
<span style='color:#696969; '> *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span style='color:#696969; '> *  See the License for the specific language governing permissions and</span>
<span style='color:#696969; '> *  limitations under the License.</span>
<span style='color:#696969; '> *</span>
<span style='color:#696969; '> */</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>"</span><span style='color:#40015a; '>ColorerFilter.h</span><span style='color:#800000; '>"</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>colorer/ParserFactory.h</span><span style='color:#800000; '>></span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>colorer/editor/BaseEditor.h</span><span style='color:#800000; '>></span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>colorer/viewer/TextLinesStore.h</span><span style='color:#800000; '>></span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>colorer/viewer/ParsedLineWriter.h</span><span style='color:#800000; '>></span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>colorer/viewer/TextConsoleViewer.h</span><span style='color:#800000; '>></span>
ColorerFilter<span style='color:#800080; '>::</span>ColorerFilter<span style='color:#808030; '>(</span>ap_filter_t<span style='color:#808030; '>*</span> pFilter<span style='color:#808030; '>,</span> <span style='color:#800000; font-weight:bold; '>const</span> <span style='color:#800000; font-weight:bold; '>char</span><span style='color:#808030; '>*</span> cpath<span style='color:#808030; '>)</span> 
<span style='color:#800080; '>{</span>
    kFilter <span style='color:#808030; '>=</span> pFilter<span style='color:#800080; '>;</span>
    pSource <span style='color:#808030; '>=</span> <span style='color:#800000; font-weight:bold; '>new</span> ChunkLineSource<span style='color:#808030; '>(</span>kFilter<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
    hrdName <span style='color:#808030; '>=</span> <span style='color:#800000; font-weight:bold; '>new</span> SString<span style='color:#808030; '>(</span><span style='color:#0000e6; '>"default"</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
    inputFileName <span style='color:#808030; '>=</span> <span style='color:#800000; font-weight:bold; '>new</span> SString<span style='color:#808030; '>(</span>kFilter<span style='color:#808030; '>-</span><span style='color:#808030; '>></span>r<span style='color:#808030; '>-</span><span style='color:#808030; '>></span>filename<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
    catalogPath <span style='color:#808030; '>=</span> <span style='color:#800000; font-weight:bold; '>new</span> DString<span style='color:#808030; '>(</span>cpath<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
    typeDescription <span style='color:#808030; '>=</span> <span style='color:#7d0045; '>NULL</span><span style='color:#800080; '>;</span>
    kFilter<span style='color:#808030; '>-</span><span style='color:#808030; '>></span>ctx <span style='color:#808030; '>=</span> <span style='color:#800000; font-weight:bold; '>this</span><span style='color:#800080; '>;</span>
<span style='color:#800080; '>}</span>
ColorerFilter<span style='color:#800080; '>::</span><span style='color:#808030; '>~</span>ColorerFilter<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span>
    <span style='color:#800000; font-weight:bold; '>delete</span> pSource<span style='color:#800080; '>;</span>
    <span style='color:#800000; font-weight:bold; '>delete</span> catalogPath<span style='color:#800080; '>;</span>
    <span style='color:#800000; font-weight:bold; '>delete</span> hrdName<span style='color:#800080; '>;</span>
    <span style='color:#800000; font-weight:bold; '>delete</span> inputFileName<span style='color:#800080; '>;</span>
    <span style='color:#800000; font-weight:bold; '>delete</span> typeDescription<span style='color:#800080; '>;</span>
<span style='color:#800080; '>}</span>
<span style='color:#800000; font-weight:bold; '>int</span> ColorerFilter<span style='color:#800080; '>::</span>SendOutput<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span>
    DString styleType <span style='color:#808030; '>=</span> DString<span style='color:#808030; '>(</span><span style='color:#0000e6; '>"rgb"</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
    ap_set_content_type<span style='color:#808030; '>(</span>kFilter<span style='color:#808030; '>-</span><span style='color:#808030; '>></span>r<span style='color:#808030; '>,</span><span style='color:#0000e6; '>"text/html; charset=utf-8"</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
    <span style='color:#800000; font-weight:bold; '>try</span> <span style='color:#800080; '>{</span>
        <span style='color:#696969; '>// parsers factory</span>
        ParserFactory pf<span style='color:#808030; '>(</span>catalogPath<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
        <span style='color:#696969; '>// HRC loading</span>
        HRCParser <span style='color:#808030; '>*</span>hrcParser <span style='color:#808030; '>=</span> pf<span style='color:#808030; '>.</span>getHRCParser<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
        RegionMapper <span style='color:#808030; '>*</span>mapper <span style='color:#808030; '>=</span> null<span style='color:#800080; '>;</span>
        <span style='color:#800000; font-weight:bold; '>bool</span> useMarkup <span style='color:#808030; '>=</span> <span style='color:#800000; font-weight:bold; '>false</span><span style='color:#800080; '>;</span>
        <span style='color:#800000; font-weight:bold; '>try</span> <span style='color:#800080; '>{</span>
            mapper <span style='color:#808030; '>=</span> pf<span style='color:#808030; '>.</span>createStyledMapper<span style='color:#808030; '>(</span><span style='color:#808030; '>&amp;</span>styleType<span style='color:#808030; '>,</span> hrdName<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
        <span style='color:#800080; '>}</span>
        <span style='color:#800000; font-weight:bold; '>catch</span><span style='color:#808030; '>(</span>ParserFactoryException <span style='color:#808030; '>&amp;</span>e<span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span>
            useMarkup <span style='color:#808030; '>=</span> <span style='color:#800000; font-weight:bold; '>true</span><span style='color:#800080; '>;</span>
            mapper <span style='color:#808030; '>=</span> pf<span style='color:#808030; '>.</span>createTextMapper<span style='color:#808030; '>(</span>hrdName<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
        <span style='color:#800080; '>}</span><span style='color:#800080; '>;</span>
        <span style='color:#696969; '>// Base editor to make primary parse</span>
        BaseEditor baseEditor<span style='color:#808030; '>(</span><span style='color:#808030; '>&amp;</span>pf<span style='color:#808030; '>,</span> pSource<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
        <span style='color:#696969; '>// Using compact regions</span>
        baseEditor<span style='color:#808030; '>.</span>setRegionCompact<span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>true</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
        baseEditor<span style='color:#808030; '>.</span>setRegionMapper<span style='color:#808030; '>(</span>mapper<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
        baseEditor<span style='color:#808030; '>.</span>lineCountEvent<span style='color:#808030; '>(</span>pSource<span style='color:#808030; '>-</span><span style='color:#808030; '>></span>getLineCount<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
        <span style='color:#696969; '>// Choosing file type</span>
        FileType <span style='color:#808030; '>*</span>type <span style='color:#808030; '>=</span> selectType<span style='color:#808030; '>(</span>hrcParser<span style='color:#808030; '>,</span> pSource<span style='color:#808030; '>-</span><span style='color:#808030; '>></span>getLine<span style='color:#808030; '>(</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
        baseEditor<span style='color:#808030; '>.</span>setFileType<span style='color:#808030; '>(</span>type<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
        <span style='color:#696969; '>// parsing all the text</span>
        baseEditor<span style='color:#808030; '>.</span>validate<span style='color:#808030; '>(</span><span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
        Hashtable<span style='color:#800080; '>&lt;</span><span style='color:#603000; '>String</span><span style='color:#808030; '>*</span><span style='color:#800080; '>></span> <span style='color:#808030; '>*</span>docLinkHash <span style='color:#808030; '>=</span> <span style='color:#800000; font-weight:bold; '>new</span> Hashtable<span style='color:#800080; '>&lt;</span><span style='color:#603000; '>String</span><span style='color:#808030; '>*</span><span style='color:#800080; '>></span><span style='color:#800080; '>;</span>
        BucketWriter<span style='color:#808030; '>*</span> myWriter <span style='color:#808030; '>=</span> <span style='color:#800000; font-weight:bold; '>new</span> BucketWriter<span style='color:#808030; '>(</span>kFilter<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
        Writer<span style='color:#808030; '>*</span> escapedWriter <span style='color:#808030; '>=</span> <span style='color:#800000; font-weight:bold; '>new</span> HtmlEscapesWriter<span style='color:#808030; '>(</span>myWriter<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
        Writer<span style='color:#808030; '>*</span> cwrite <span style='color:#808030; '>=</span> myWriter<span style='color:#800080; '>;</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>if</span><span style='color:#004a43; '> 0 </span><span style='color:#696969; '>/* Add Configuration Options to add HTML Header.. etc */</span>
        <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span><span style='color:#808030; '>)</span>
            cwrite<span style='color:#808030; '>-</span><span style='color:#808030; '>></span>write<span style='color:#808030; '>(</span>DString<span style='color:#808030; '>(</span><span style='color:#0000e6; '>"&lt;html></span><span style='color:#0f69ff; '>\n</span><span style='color:#0000e6; '>&lt;head></span><span style='color:#0f69ff; '>\n</span><span style='color:#0000e6; '>&lt;style>&lt;/style></span><span style='color:#0f69ff; '>\n</span><span style='color:#0000e6; '>&lt;/head></span><span style='color:#0f69ff; '>\n</span><span style='color:#0000e6; '>&lt;body>&lt;pre></span><span style='color:#0f69ff; '>\n</span><span style='color:#0000e6; '>"</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>endif</span>
        cwrite<span style='color:#808030; '>-</span><span style='color:#808030; '>></span>write<span style='color:#808030; '>(</span>DString<span style='color:#808030; '>(</span><span style='color:#0000e6; '>"&lt;pre></span><span style='color:#0f69ff; '>\n</span><span style='color:#0000e6; '>"</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
        <span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> i <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> i <span style='color:#808030; '>&lt;</span> pSource<span style='color:#808030; '>-</span><span style='color:#808030; '>></span>getLineCount<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span> i<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
            htmlRGBWrite<span style='color:#808030; '>(</span>myWriter<span style='color:#808030; '>,</span> escapedWriter<span style='color:#808030; '>,</span> docLinkHash<span style='color:#808030; '>,</span> 
                         pSource<span style='color:#808030; '>-</span><span style='color:#808030; '>></span>getLine<span style='color:#808030; '>(</span>i<span style='color:#808030; '>)</span><span style='color:#808030; '>,</span> baseEditor<span style='color:#808030; '>.</span>getLineRegions<span style='color:#808030; '>(</span>i<span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
        <span style='color:#800080; '>}</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>if</span><span style='color:#004a43; '> 0 </span><span style='color:#696969; '>/* Add Configuration Options to add HTML Header.. etc */</span>
        <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span><span style='color:#808030; '>)</span>
            cwrite<span style='color:#808030; '>-</span><span style='color:#808030; '>></span>write<span style='color:#808030; '>(</span>DString<span style='color:#808030; '>(</span><span style='color:#0000e6; '>"&lt;/pre>&lt;/body>&lt;/html></span><span style='color:#0f69ff; '>\n</span><span style='color:#0000e6; '>"</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>endif</span>
        cwrite<span style='color:#808030; '>-</span><span style='color:#808030; '>></span>write<span style='color:#808030; '>(</span>DString<span style='color:#808030; '>(</span><span style='color:#0000e6; '>"&lt;/pre></span><span style='color:#0f69ff; '>\n</span><span style='color:#0000e6; '>"</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
        myWriter<span style='color:#808030; '>-</span><span style='color:#808030; '>></span>SendBrigade<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
        <span style='color:#800000; font-weight:bold; '>delete</span> docLinkHash<span style='color:#800080; '>;</span>
        <span style='color:#800000; font-weight:bold; '>delete</span> escapedWriter<span style='color:#800080; '>;</span>
        <span style='color:#800000; font-weight:bold; '>delete</span> myWriter<span style='color:#800080; '>;</span>
    <span style='color:#800080; '>}</span>
    <span style='color:#800000; font-weight:bold; '>catch</span><span style='color:#808030; '>(</span>Exception <span style='color:#808030; '>&amp;</span>e<span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span>
        ap_log_rerror<span style='color:#808030; '>(</span>APLOG_MARK<span style='color:#808030; '>,</span> APLOG_ERR<span style='color:#808030; '>,</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span> kFilter<span style='color:#808030; '>-</span><span style='color:#808030; '>></span>r<span style='color:#808030; '>,</span> 
                      <span style='color:#0000e6; '>"ColorerFilter::SendOutput(): uncaught exception: </span><span style='color:#0f69ff; '>%s</span><span style='color:#0000e6; '>"</span><span style='color:#808030; '>,</span>
                      e<span style='color:#808030; '>.</span>getMessage<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>-</span><span style='color:#808030; '>></span>getChars<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>    
        <span style='color:#800000; font-weight:bold; '>return</span> HTTP_INTERNAL_SERVER_ERROR<span style='color:#800080; '>;</span>
    <span style='color:#800080; '>}</span>
    <span style='color:#800000; font-weight:bold; '>catch</span><span style='color:#808030; '>(</span><span style='color:#808030; '>.</span><span style='color:#808030; '>.</span><span style='color:#808030; '>.</span><span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span>
        ap_log_rerror<span style='color:#808030; '>(</span>APLOG_MARK<span style='color:#808030; '>,</span> APLOG_ERR<span style='color:#808030; '>,</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span> kFilter<span style='color:#808030; '>-</span><span style='color:#808030; '>></span>r<span style='color:#808030; '>,</span> <span style='color:#0000e6; '>"ColorerFilter::SendOutput(): unknown exception!"</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>    
        <span style='color:#800000; font-weight:bold; '>return</span> HTTP_INTERNAL_SERVER_ERROR<span style='color:#800080; '>;</span>
    <span style='color:#800080; '>}</span><span style='color:#800080; '>;</span>
    <span style='color:#800000; font-weight:bold; '>return</span> OK<span style='color:#800080; '>;</span>
<span style='color:#800080; '>}</span>
FileType <span style='color:#808030; '>*</span>ColorerFilter<span style='color:#800080; '>::</span>selectType<span style='color:#808030; '>(</span>HRCParser <span style='color:#808030; '>*</span>hrcParser<span style='color:#808030; '>,</span> <span style='color:#603000; '>String</span> <span style='color:#808030; '>*</span>fline<span style='color:#808030; '>)</span>
<span style='color:#800080; '>{</span>
    FileType <span style='color:#808030; '>*</span>type <span style='color:#808030; '>=</span> null<span style='color:#800080; '>;</span>
    <span style='color:#800000; font-weight:bold; '>if</span> <span style='color:#808030; '>(</span>typeDescription <span style='color:#808030; '>!</span><span style='color:#808030; '>=</span> null<span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span>
        type <span style='color:#808030; '>=</span> hrcParser<span style='color:#808030; '>-</span><span style='color:#808030; '>></span>getFileType<span style='color:#808030; '>(</span>typeDescription<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
        <span style='color:#800000; font-weight:bold; '>if</span> <span style='color:#808030; '>(</span>type <span style='color:#808030; '>=</span><span style='color:#808030; '>=</span> null<span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span>
            <span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> idx <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span><span style='color:#800080; '>;</span> idx<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#808030; '>)</span>
            <span style='color:#800080; '>{</span>
                type <span style='color:#808030; '>=</span> hrcParser<span style='color:#808030; '>-</span><span style='color:#808030; '>></span>enumerateFileTypes<span style='color:#808030; '>(</span>idx<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
                <span style='color:#800000; font-weight:bold; '>if</span> <span style='color:#808030; '>(</span>type <span style='color:#808030; '>=</span><span style='color:#808030; '>=</span> null<span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span>
                    <span style='color:#800000; font-weight:bold; '>break</span><span style='color:#800080; '>;</span>
                <span style='color:#800080; '>}</span>
                <span style='color:#800000; font-weight:bold; '>if</span> <span style='color:#808030; '>(</span>type<span style='color:#808030; '>-</span><span style='color:#808030; '>></span>getDescription<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span> <span style='color:#808030; '>!</span><span style='color:#808030; '>=</span> null <span style='color:#808030; '>&amp;</span><span style='color:#808030; '>&amp;</span>
                    type<span style='color:#808030; '>-</span><span style='color:#808030; '>></span>getDescription<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>-</span><span style='color:#808030; '>></span>length<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span> <span style='color:#808030; '>></span><span style='color:#808030; '>=</span> typeDescription<span style='color:#808030; '>-</span><span style='color:#808030; '>></span>length<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span> <span style='color:#808030; '>&amp;</span><span style='color:#808030; '>&amp;</span>
                    DString<span style='color:#808030; '>(</span>type<span style='color:#808030; '>-</span><span style='color:#808030; '>></span>getDescription<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>,</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span> typeDescription<span style='color:#808030; '>-</span><span style='color:#808030; '>></span>length<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#808030; '>.</span>equalsIgnoreCase<span style='color:#808030; '>(</span>typeDescription<span style='color:#808030; '>)</span><span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span>
                    <span style='color:#800000; font-weight:bold; '>break</span><span style='color:#800080; '>;</span>
                <span style='color:#800080; '>}</span>
                <span style='color:#800000; font-weight:bold; '>if</span> <span style='color:#808030; '>(</span>type<span style='color:#808030; '>-</span><span style='color:#808030; '>></span>getName<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>-</span><span style='color:#808030; '>></span>length<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span> <span style='color:#808030; '>></span><span style='color:#808030; '>=</span> typeDescription<span style='color:#808030; '>-</span><span style='color:#808030; '>></span>length<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span> <span style='color:#808030; '>&amp;</span><span style='color:#808030; '>&amp;</span>
                    DString<span style='color:#808030; '>(</span>type<span style='color:#808030; '>-</span><span style='color:#808030; '>></span>getName<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>,</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span> typeDescription<span style='color:#808030; '>-</span><span style='color:#808030; '>></span>length<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#808030; '>.</span>equalsIgnoreCase<span style='color:#808030; '>(</span>typeDescription<span style='color:#808030; '>)</span><span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span>
                    <span style='color:#800000; font-weight:bold; '>break</span><span style='color:#800080; '>;</span>
                <span style='color:#800080; '>}</span>
                type <span style='color:#808030; '>=</span> null<span style='color:#800080; '>;</span>
            <span style='color:#800080; '>}</span>
        <span style='color:#800080; '>}</span>
    <span style='color:#800080; '>}</span>
    <span style='color:#800000; font-weight:bold; '>if</span> <span style='color:#808030; '>(</span>typeDescription <span style='color:#808030; '>=</span><span style='color:#808030; '>=</span> null <span style='color:#808030; '>|</span><span style='color:#808030; '>|</span> type <span style='color:#808030; '>=</span><span style='color:#808030; '>=</span> null<span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span>
        type <span style='color:#808030; '>=</span> hrcParser<span style='color:#808030; '>-</span><span style='color:#808030; '>></span>chooseFileType<span style='color:#808030; '>(</span>inputFileName<span style='color:#808030; '>,</span> fline<span style='color:#808030; '>,</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
    <span style='color:#800080; '>}</span>
    <span style='color:#800000; font-weight:bold; '>return</span> type<span style='color:#800080; '>;</span>
<span style='color:#800080; '>}</span>
</pre>
